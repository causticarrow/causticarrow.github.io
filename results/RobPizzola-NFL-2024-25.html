<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Results - causticarrow.com</title>
    <link rel="stylesheet" href="../style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container">
      <aside class="sidebar">
        <input type="text" class="search-bar" placeholder="Search" />
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="https://x.com/causticarrow">ùïè (Twitter)</a></li>
          <li class="category-header">
            <span class="category-toggle">Results</span>
            <ul class="category-content" id="results-list"></ul>
          </li>
        </ul>
      </aside>
      <main class="main-content">
        <h1 id="pageHeader">Results</h1>
        <div id="chart-container" style="width: 100%; height: 300px">
          <canvas id="myChart" style="width: 100%; height: 300px"></canvas>
        </div>
        <table class="summary-table">
          <thead>
            <tr>
              <th>n</th>
              <th>Record</th>
              <th>Units</th>
              <th>ROI</th>
              <th>BTCL</th>
              <th>No-Vig CLV</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="n"></td>
              <td id="record"></td>
              <td id="units"></td>
              <td id="roi"></td>
              <td id="btcl"></td>
              <td id="noVigClv"></td>
            </tr>
          </tbody>
        </table>
        <table class="detailed-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Play</th>
              <th>Result</th>
              <th>Units</th>
              <th>Score</th>
              <th>Close</th>
              <th>No-Vig CLV</th>
            </tr>
          </thead>
          <tbody id="resultsTableBody"></tbody>
        </table>
      </main>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // -------------------------
        // Auto-config from filename
        // -------------------------
        function getConfigFromFilename() {
          const fileName = window.location.pathname.split("/").pop().replace(".html", "");
          const parts = fileName.split("-");

          let name = "";
          let sport = "";
          let year = "";

          if (parts.length === 1) {
            // Only name
            name = parts[0];
          } else if (parts.length === 2) {
            // e.g. alexcaruso-2024-25.html
            name = parts[0];
            year = parts[1];
          } else if (parts.length >= 3) {
            // e.g. CliveBixby41-NFL-2024-25.html
            name = parts[0];
            sport = parts[1];
            year = parts.slice(2).join("-");
          }

          return { name, sport, year };
        }

        const config = getConfigFromFilename();

        // -------------------------
        // Example data (replace with real data)
        // -------------------------
        var data = [
{date: "2025-01-12",sport: "NFL",play: "384 Tampa Bay -2.5 (-120) vs. Washington",result: "Loss",score: "20-23",close: "-135.3",clv: "1.58%"},
{date: "2025-01-05",sport: "NFL",play: "357 Seattle +2.5 (-115) vs. LA Rams",result: "Win",score: "30-25",close: "-472.5",clv: "28.06%"},
{date: "2025-01-05",sport: "NFL",play: "347 LA Chargers/Las Vegas Over 40.5",result: "Win",score: "34-20",close: "-134.4",clv: "3.36%"},
{date: "2024-12-28",sport: "NFL",play: "408 New England +6 (-115) vs. LA Chargers",result: "Loss",score: "7-40",close: "-105",clv: "-3.73%"},
{date: "2024-12-25",sport: "NFL",play: "404 Baltimore/Houston Under 48",result: "Win",score: "31-2",close: "-129.2",clv: "2.37%"},
{date: "2024-12-22",sport: "NFL",play: "111 New England/Buffalo Over 44.5 (-115)",result: "Win",score: "21-24",close: "-179.1",clv: "9.19%"},
{date: "2024-12-22",sport: "NFL",play: "109 Arizona/Carolina Over 46",result: "Win",score: "30-36 OT",close: "-122.8",clv: "1.10%"},
{date: "2024-12-15",sport: "NFL",play: "477 New England/Arizona Over 44",result: "Win",score: "17-30",close: "-152.5",clv: "6.46%"},
{date: "2024-12-09",sport: "NFL",play: "144 Dallas +6 (-105) vs. Cincinnati",result: "Loss",score: "20-27",close: "-135",clv: "4.85%"},
{date: "2024-12-08",sport: "NFL",play: "133 NY Jets/Miami Over 44.5",result: "Win",score: "26-32",close: "-122.7",clv: "1.08%"},
{date: "2024-12-08",sport: "NFL",play: "131 Carolina +13 vs. Philadelphia",result: "Win",score: "16-22",close: "-102.3",clv: "-3.28%"},
{date: "2024-12-02",sport: "NFL",play: "483 Cleveland/Denver Over 40.5 (-115)",result: "Win",score: "32-41",close: "-126.2",clv: "0.68%"},
{date: "2024-12-01",sport: "NFL",play: "474 Seattle/NY Jets Under 43.5 (-115)",result: "Loss",score: "26-21",close: "-135",clv: "2.36%"},
{date: "2024-12-01",sport: "NFL",play: "461 Tennessee +6 vs. Washington",result: "Loss",score: "19-42",close: "-117",clv: "0.11%"},
{date: "2024-11-28",sport: "NFL",play: "309 Miami +3.5 (-115) vs. Green Bay",result: "Loss",score: "17-30",close: "-114",clv: "-1.65%"},
{date: "2024-11-24",sport: "NFL",play: "267 Arizona +1 (-105) vs. Seattle",result: "Loss",score: "6-16",close: "-122.6",clv: "2.45%"},
{date: "2024-11-24",sport: "NFL",play: "265 Denver TT Over 22.5 vs. Las Vegas",result: "Win",score: "29",close: "-150",clv: "6.06%"},
{date: "2024-11-24",sport: "NFL",play: "261 New England +7.5 vs. Miami",result: "Loss",score: "15-34",close: "-116",clv: "-0.10%"},
{date: "2024-11-24",sport: "NFL",play: "261 New England/Miami Over 44.5",result: "Win",score: "15-34",close: "-124.8",clv: "1.51%"},
{date: "2024-11-17",sport: "NFL",play: "470 Kansas City/Buffalo Under 46.5 (-115)",result: "Loss",score: "21-30",close: "+100",clv: "-5.21%"},
{date: "2024-11-17",sport: "NFL",play: "453 Cleveland +2.5 vs. New Orleans",result: "Loss",score: "14-35",close: "-141",clv: "4.77%"},
{date: "2024-11-17",sport: "NFL",play: "452 Green Bay/Chicago Under 42.5",result: "Win",score: "20-19",close: "-145",clv: "5.23%"},
{date: "2024-11-10",sport: "NFL",play: "275 New England +7 vs. Chicago",result: "Win",score: "19-3",close: "-125",clv: "1.77%"},
{date: "2024-11-07",sport: "NFL",play: "109 Cincinnati/Baltimore Over 51.5",result: "Win",score: "34-35",close: "-143",clv: "4.89%"},
{date: "2024-11-03",sport: "NFL",play: "476 Philadelphia -6.5 (-115) vs. Jacksonville",result: "Loss",score: "28-23",close: "-137",clv: "2.95%"},
{date: "2024-11-03",sport: "NFL",play: "471 LA Rams/Seattle Over 48.5",result: "Loss",score: "26-20 OT",close: "-115",clv: "-0.55%"},
{date: "2024-11-03",sport: "NFL",play: "461 Denver/Baltimore Over 43.5",result: "Win",score: "10-41",close: "-167",clv: "8.65%"},
{date: "2024-11-03",sport: "NFL",play: "458 Miami/Buffalo Under 48.5",result: "Loss",score: "27-30",close: "+102",clv: "-4.60%"},
{date: "2024-10-27",sport: "NFL",play: "280 Buffalo/Seattle Under 48.5",result: "Win",score: "31-10",close: "-163.2",clv: "8.10%"},
{date: "2024-10-20",sport: "NFL",play: "463 Detroit TT Under 24.5 (-115) vs. Minnesota",result: "Loss",score: "31",close: "-115",clv: "-1.66%"},
{date: "2024-10-13",sport: "NFL",play: "286 Cincinnati/NY Giants Under 48.5",result: "Win",score: "17-7",close: "-141.2",clv: "4.58%"},
{date: "2024-10-13",sport: "NFL",play: "275 LA Chargers -1.5 (-115) vs. Denver",result: "Win",score: "23-16",close: "-141.2",clv: "3.69%"},
{date: "2024-10-13",sport: "NFL",play: "269 Houston/Cleveland Over 38",result: "Win",score: "41-21",close: "-114.6",clv: "-0.64%"},
{date: "2024-10-06",sport: "NFL",play: "469 Green Bay/LA Rams Over 46.5 (-115)",result: "Loss",score: "24-19",close: "-172.1",clv: "8.26%"},
{date: "2024-10-06",sport: "NFL",play: "459 Indianapolis/Jacksonville Over 45.5",result: "Win",score: "34-37",close: "-101.3",clv: "-3.77%"},
{date: "2024-09-29",sport: "NFL",play: "284 Cleveland/Las Vegas Under 39.5",result: "Win",score: "16-20",close: "-143.7",clv: "5.01%"},
{date: "2024-09-26",sport: "NFL",play: "101 Dallas/NY Giants Over 43.5 (-115)",result: "Loss",score: "20-15",close: "-147",clv: "4.46%"},
{date: "2024-09-22",sport: "NFL",play: "451 LA Chargers +2.5 vs. Pittsburgh",result: "Loss",score: "10-20",close: "-102",clv: "-3.36%"},
{date: "2024-09-15",sport: "NFL",play: "281 NY Giants/Washington Over 41",result: "Loss",score: "18-21",close: "-127.2",clv: "1.98%"},
{date: "2024-09-15",sport: "NFL",play: "278 Seattle/New England Under 40",result: "Loss",score: "23-20 OT",close: "-121",clv: "0.73%"},
{date: "2024-12-28",sport: "NFL",play: "416 Arizona/LA Rams Under 49",result: "Win",score: "9-13",close: "-124",clv: "1.34%"},
{date: "2024-12-26",sport: "NFL",play: "405 Seattle -3 (-120) vs. Chicago",result: "Push",score: "6-3",close: "-154.8",clv: "4.88%"},
{date: "2024-12-22",sport: "NFL",play: "115 NY Giants/Atlanta Over 41.5",result: "Loss",score: "7-34",close: "-130",clv: "2.53%"},
{date: "2024-12-22",sport: "NFL",play: "110 Carolina +4.5 vs. Arizona",result: "Win",score: "36-30 OT",close: "+102.2",clv: "-4.41%"},
{date: "2024-12-22",sport: "NFL",play: "107 Detroit/Chicago Over 46.5",result: "Win",score: "34-17",close: "-125",clv: "1.55%"},
{date: "2024-12-16",sport: "NFL",play: "483 Atlanta/Las Vegas Over 42.5",result: "Loss",score: "15-9",close: "-147",clv: "5.57%"},
{date: "2024-12-16",sport: "NFL",play: "481 Chicago/Minnesota Over 43",result: "Loss",score: "12-30",close: "-123",clv: "1.14%"},
{date: "2024-12-15",sport: "NFL",play: "473 Indianapolis +5.5 vs. Denver",result: "Loss",score: "13-31",close: "-118",clv: "0.33%"},
{date: "2024-12-15",sport: "NFL",play: "463 Baltimore -14 (-115) vs. NY Giants",result: "Win",score: "35-14",close: "-153.8",clv: "5.78%"},
{date: "2024-12-08",sport: "NFL",play: "127 Tampa Bay -7 vs. Las Vegas",result: "Win",score: "28-13",close: "-105.3",clv: "-2.55%"},
{date: "2024-12-01",sport: "NFL",play: "475 Tampa Bay/Carolina Over 45.5",result: "Win",score: "26-23 OT",close: "-118",clv: "0.10%"},
{date: "2024-12-01",sport: "NFL",play: "463 LA Chargers/Atlanta Over 46.5",result: "Loss",score: "17-13",close: "-120.7",clv: "0.67%"},
{date: "2024-11-17",sport: "NFL",play: "474 Indianapolis/NY Jets Under 45",result: "Loss",score: "28-27",close: "-145",clv: "5.23%"},
{date: "2024-11-10",sport: "NFL",play: "275 New England/Chicago Over 38.5 (-115)",result: "Loss",score: "19-3",close: "110",clv: "-7.63%"},
{date: "2024-11-03",sport: "NFL",play: "459 Dallas/Atlanta Over 48.5",result: "Loss",score: "21-27",close: "-165",clv: "8.36%"},
{date: "2024-11-03",sport: "NFL",play: "453 LA Chargers/Cleveland Over 39.5",result: "Loss",score: "27-10",close: "-139",clv: "4.19%"},
{date: "2024-10-27",sport: "NFL",play: "283 Philadelphia/Cincinnati Over 46.5",result: "Win",score: "37-17",close: "-130.3",clv: "2.59%"},
{date: "2024-10-27",sport: "NFL",play: "266 Cleveland +10 vs. Baltimore",result: "Win",score: "29-24",close: "-139.1",clv: "4.43%"},
{date: "2024-10-20",sport: "NFL",play: "461 Miami +4.5 (-115) vs. Indianapolis",result: "Loss",score: "10-16",close: "-164.3",clv: "7.37%"},
{date: "2024-10-20",sport: "NFL",play: "459 Houston +3 vs. Green Bay",result: "Win",score: "22-24",close: "+105",clv: "-5.09%"},
{date: "2024-10-20",sport: "NFL",play: "453 Seattle +3 (-115) vs. Atlanta",result: "Win",score: "34-14",close: "-105",clv: "-3.73%"},
{date: "2024-10-20",sport: "NFL",play: "451 New England/Jacksonville Over 42",result: "Win",score: "16-32",close: "-113",clv: "-1.00%"},
{date: "2024-10-17",sport: "NFL",play: "311 Denver +1.5 vs. New Orleans",result: "Win",score: "33-10",close: "-163.8",clv: "8.40%"},
{date: "2024-10-13",sport: "NFL",play: "281 Atlanta -5.5 vs. Carolina",result: "Win",score: "38-20",close: "-118.2",clv: "0.37%"},
{date: "2024-10-13",sport: "NFL",play: "276 Denver TT Under 16.5 (-115) vs. LA Chargers",result: "Win",score: "16",close: "-125",clv: "0.44%"},
{date: "2024-10-13",sport: "NFL",play: "276 LA Chargers/Denver Under 37",result: "Loss",score: "23-16",close: "-108",clv: "-2.14%"},
{date: "2024-10-06",sport: "NFL",play: "466 Denver -1.5 vs. Las Vegas",result: "Win",score: "34-18",close: "-162.2",clv: "8.17%"},
{date: "2024-10-06",sport: "NFL",play: "463 Cleveland/Washington Over 43.5",result: "Win",score: "13-34",close: "-111.7",clv: "-1.29%"},
{date: "2024-10-06",sport: "NFL",play: "453 Carolina/Chicago Over 42.5 (-105)",result: "Win",score: "10-36",close: "+120.6",clv: "-7.68%"},
{date: "2024-09-30",sport: "NFL",play: "291 Seattle +4.5 vs. Detroit",result: "Loss",score: "29-42",close: "-117.1",clv: "0.13%"},
{date: "2024-09-26",sport: "NFL",play: "102 NY Giants +5.5 vs. Dallas",result: "Win",score: "15-20",close: "-110",clv: "-1.44%"},
{date: "2024-09-23",sport: "NFL",play: "477 Jacksonville +6 vs. Buffalo",result: "Loss",score: "10-47",close: "-136.1",clv: "3.89%"},
{date: "2024-09-22",sport: "NFL",play: "474 LA Rams +7 vs. San Francisco",result: "Win",score: "27-24",close: "-141.5",clv: "4.85%"},
{date: "2024-09-22",sport: "NFL",play: "464 Tennessee -2 vs. Green Bay",result: "Loss",score: "14-30",close: "-135.9",clv: "3.86%"},
{date: "2024-09-22",sport: "NFL",play: "457 NY Giants/Cleveland Over 38",result: "Loss",score: "21-15",close: "-115",clv: "-0.55%"}
        ];

        // -------------------------
        // Sidebar auto-loader
        // -------------------------
        async function populateSidebar() {
          const ul = document.getElementById("results-list");
          ul.innerHTML = "";

          try {
            const response = await fetch("results.json");
            const pages = await response.json();

            const currentPage = window.location.pathname.split("/").pop();

            pages.forEach((p) => {
              const li = document.createElement("li");
              const a = document.createElement("a");
              a.href = p.file;
              a.textContent = p.label;

              // Highlight current page
              if (p.file === currentPage) {
                a.classList.add("active");
              }

              li.appendChild(a);
              ul.appendChild(li);
            });
          } catch (err) {
            console.error("Could not load results.json", err);
          }
        }

        // -------------------------
        // Title/Header
        // -------------------------
        function setTitleAndHeader() {
          var title =
            config.name +
            (config.year ? " " + config.year : "") +
            (config.sport ? " " + config.sport : "") +
            " Results - causticarrow.com";

          var header =
            (config.year ? config.year + " " : "") +
            (config.sport ? config.sport + " " : "") +
            "(" + config.name + ")";

          document.title = title;
          document.getElementById("pageHeader").textContent = header;
        }

        // -------------------------
        // Search filter
        // -------------------------
        function filterSidebar() {
          var input, filter, ul, li, i;
          input = document.querySelector(".search-bar");
          filter = input.value.toUpperCase();
          ul = document.querySelector(".sidebar ul");
          li = ul.getElementsByTagName("li");

          for (i = 0; i < li.length; i++) {
            var a = li[i].getElementsByTagName("a")[0];
            if (a) {
              var txtValue = li[i].textContent || li[i].innerText;
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
              } else {
                var shouldHide = true;
                li[i].querySelectorAll("*").forEach((node) => {
                  if (
                    (node.textContent || node.innerText)
                      .toUpperCase()
                      .indexOf(filter) > -1
                  ) {
                    shouldHide = false;
                  }
                });
                li[i].style.display = shouldHide ? "none" : "";
              }
            }
          }
        }

        // -------------------------
        // Units & Risk Calculations
        // -------------------------
        function calculateUnits(row) {
          if (row.result === "Win") {
            return 1;
          } else if (row.result === "Loss") {
            if (row.play.includes("(")) {
              var oddsMatch = row.play.match(/\(([-+]?\d+(?:\.\d+)?)\)/);
              if (oddsMatch) {
                var odds = parseFloat(oddsMatch[1]);
                if (odds > 0) {
                  return -(100 / odds);
                } else {
                  return -(Math.abs(odds) / 100);
                }
              } else {
                return -1.1;
              }
            } else {
              return -1.1;
            }
          } else if (row.result === "Pending") {
            return null;
          } else {
            return 0;
          }
        }

        function calculateRisk(row) {
          if (row.play.includes("(")) {
            var oddsMatch = row.play.match(/\(([-+]?\d+(?:\.\d+)?)\)/);
            if (oddsMatch) {
              var odds = parseFloat(oddsMatch[1]);
              if (odds > 0) {
                return odds / 100;
              } else {
                return Math.abs(odds) / 100;
              }
            } else {
              return 1.1;
            }
          } else {
            return 1.1;
          }
        }

        function formatValue(value, isPercentage = false) {
          if (value === null) return "‚Äî";
          if (isPercentage) {
            if (value === 0) return "‚Äî";
            return value > 0
              ? `+${value.toFixed(2)}%`
              : `${value.toFixed(2)}%`;
          } else {
            return value > 0
              ? `+${value.toFixed(2)}`
              : value < 0
              ? `${value.toFixed(2)}`
              : "0.00";
          }
        }

        // -------------------------
        // Summary Table
        // -------------------------
        function updateSummaryTable() {
          let wins = 0,
            losses = 0,
            pushes = 0,
            totalUnits = 0,
            positiveClv = 0,
            totalClv = 0,
            totalRisked = 0;

          data.forEach((row) => {
            if (row.result === "Win") {
              wins++;
              totalUnits += calculateUnits(row);
            } else if (row.result === "Loss") {
              losses++;
              totalUnits += calculateUnits(row);
            } else if (row.result === "Push") {
              pushes++;
            }
            if (row.result !== "Pending") {
              totalRisked += calculateRisk(row);
              let clvValue = parseFloat(row.clv.replace("%", ""));
              if (clvValue > 0) positiveClv++;
              totalClv += clvValue;
            }
          });

          let nElement = document.getElementById("n");
          let recordElement = document.getElementById("record");
          let unitsElement = document.getElementById("units");
          let roiElement = document.getElementById("roi");
          let btclElement = document.getElementById("btcl");
          let noVigClvElement = document.getElementById("noVigClv");

          if (nElement) nElement.textContent = data.length;
          if (recordElement)
            recordElement.textContent = `${wins} - ${losses} - ${pushes} (${(
              (wins / (wins + losses)) *
              100
            ).toFixed(2)}%)`;

          if (unitsElement) {
            unitsElement.textContent = formatValue(totalUnits);
            unitsElement.style.color =
              totalUnits > 0
                ? "#1ea672"
                : totalUnits < 0
                ? "#ff5252"
                : "#8c99ad";
          }

          if (roiElement) {
            let roi = (totalUnits / totalRisked) * 100;
            roiElement.textContent = formatValue(roi, true);
            roiElement.style.color =
              roi > 0 ? "#1ea672" : roi < 0 ? "#ff5252" : "#8c99ad";
          }

          let settledBetsCount = data.filter(
            (row) => row.result !== "Pending"
          ).length;
          let btclPercent =
            settledBetsCount > 0 ? (positiveClv / settledBetsCount) * 100 : 0;
          if (btclElement) {
            btclElement.textContent = btclPercent === 0 ? "‚Äî" : `${btclPercent.toFixed(2)}%`;
          }

          if (noVigClvElement) {
            let avgClv = settledBetsCount > 0 ? totalClv / settledBetsCount : 0;
            noVigClvElement.textContent = formatValue(avgClv, true);
            noVigClvElement.style.color =
              avgClv > 0 ? "#1ea672" : avgClv < 0 ? "#ff5252" : "#8c99ad";
          }
        }

        // -------------------------
        // Detailed Table
        // -------------------------
        function populateDetailedTable() {
          let tbody = document.getElementById("resultsTableBody");
          tbody.innerHTML = "";

          data.sort((a, b) => new Date(b.date) - new Date(a.date));

          data.forEach((row) => {
            let units = calculateUnits(row);
            let tr = document.createElement("tr");
            let unitColor = "#8c99ad";
            let formattedUnits = formatValue(units);

            if (units !== null) {
              unitColor =
                units > 0 ? "#1ea672" : units < 0 ? "#ff5252" : "#8c99ad";
              if (formattedUnits === "0.00") unitColor = "#8c99ad";
            }

            let clvValue = parseFloat(row.clv.replace("%", ""));
            let formattedClv = formatValue(clvValue, true);
            let clvColor =
              clvValue > 0 ? "#1ea672" : clvValue < 0 ? "#ff5252" : "#8c99ad";

            tr.innerHTML = `
              <td style="color: #8c99ad; text-align: center;">
                <span class="date">${row.date}</span>${row.sport}
              </td>
              <td style="color: #8c99ad;">${row.play}</td>
              <td style="color: ${
                row.result === "Win"
                  ? "#1ea672"
                  : row.result === "Loss"
                  ? "#ff5252"
                  : "#8c99ad"
              }; text-align: center;">${row.result}</td>
              <td style="color: ${unitColor}; text-align: center;">${formattedUnits}</td>
              <td style="color: #8c99ad; text-align: center;">${row.score}</td>
              <td style="color: #8c99ad; text-align: center;">${row.close}</td>
              <td style="color: ${clvColor}; text-align: right;">${formattedClv}</td>
            `;
            tbody.appendChild(tr);
          });
        }

        // -------------------------
        // Chart
        // -------------------------
        function createSimpleChart() {
          var chartData = data.reduce((acc, row) => {
            var date = new Date(row.date);
            var dateString = date.toISOString().split("T")[0];
            if (!acc[dateString]) {
              acc[dateString] = { date: date, units: 0 };
            }
            acc[dateString].units += calculateUnits(row) || 0;
            return acc;
          }, {});

          var chartDataArray = Object.values(chartData).sort(
            (a, b) => a.date - b.date
          );
          var labels = ["\u00A0"].concat(
            chartDataArray.map((item) => {
              var date = new Date(item.date);
              return `${date.toLocaleString("en-US", {
                month: "short",
              })} ${date.getUTCDate()}`;
            })
          );
          var cumulativeUnits = chartDataArray.reduce(
            (cumulative, item, index) => {
              var total =
                index === 0
                  ? item.units
                  : cumulative[cumulative.length - 1] + item.units;
              cumulative.push(total);
              return cumulative;
            },
            [0]
          );

          var ctx = document.getElementById("myChart").getContext("2d");
          window.myChart = new Chart(ctx, {
            type: "line",
            data: {
              labels: labels,
              datasets: [
                {
                  label: "Cumulative Units",
                  data: cumulativeUnits,
                  borderColor: "rgba(0, 128, 128, 1)",
                  backgroundColor: "rgba(0, 128, 128, 0.2)",
                  fill: true,
                  lineTension: 0,
                  pointRadius: 0,
                  pointStyle: "circle",
                  pointBackgroundColor: "#1ea672",
                  pointBorderColor: "#1ea672",
                  pointBorderWidth: 1,
                  pointHoverRadius: 3,
                  pointHoverBackgroundColor: "#1ea672",
                  pointHoverBorderColor: "#1ea672",
                  pointHoverBorderWidth: 2,
                  responsive: true,
                },
              ],
            },
            options: {
              scales: {
                x: { display: false, grid: { display: false } },
                y: { display: true, grid: { display: false } },
              },
              plugins: {
                legend: { display: false },
                tooltip: {
                  mode: "index",
                  intersect: false,
                  displayColors: false,
                  callbacks: {
                    title: function (tooltipItems) {
                      if (tooltipItems[0].dataIndex === 0) return "\u00A0";
                      var date = new Date(
                        chartDataArray[tooltipItems[0].dataIndex - 1].date
                      );
                      return `${date.toLocaleString("en-US", {
                        month: "short",
                      })} ${date.getUTCDate()}`;
                    },
                    label: function (context) {
                      return "‚óè  Units: " + context.parsed.y.toFixed(2);
                    },
                  },
                },
              },
              layout: { padding: 0 },
            },
          });
        }

        // -------------------------
        // Init
        // -------------------------
        setTitleAndHeader();
        populateSidebar();
        document
          .querySelector(".search-bar")
          .addEventListener("input", filterSidebar);
        updateSummaryTable();
        populateDetailedTable();
        createSimpleChart();
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/decimal.js@10.3.1/decimal.min.js"></script>
  </body>
</html>
